<% if not profile.node? %>
  <%= render :file => "#{Rails.root}/app/views/catalog/index.html.erb" %>
<% else %>
  <h1><%= _('Products/Services') %></h1>

  <% if profile.network_node? %>
    <% profile.suppliers.except_self.each do |supplier| %>
      <%= render 'catalog/node_products', :node => supplier.profile %>
    <% end %>
  <% else # network %>
    <% profile.nodes.each do |node| %>
      <%= render 'catalog/node_products', :node => node %>
    <% end %>
  <% end %>
<% end %>

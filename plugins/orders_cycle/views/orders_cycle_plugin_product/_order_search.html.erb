<% if products_for_order.empty? %>
  <strong><%= t('orders_cycle_plugin.views.product._order_search.this_search_hasn_t_re') %></strong>
<% else %>
  <div id="cycle-products" class="sortable-table">

    <div class="table-header">
      <div class="box-field category"><%=t('orders_cycle_plugin.views.product._order_search.category')%></div>
      <div class="box-field supplier"><%=t('orders_cycle_plugin.views.product._order_search.producer')%></div>
      <div class="box-field product"><%=t('orders_cycle_plugin.views.product._order_search.product')%></div>
      <div class="box-field price-with-unit"><%=t('orders_cycle_plugin.views.product._order_search.price')%></div>
    </div>

    <div class="table-content">
      <% products_for_order.each do |offered_product| %>
        <div id="cycle-product-<%=offered_product.id%>" class="order-cycle-product value-row" toggleedit="orders_cycle.offered_product.order.toggle();">
          <%= render :partial => "orders_cycle_plugin_product/order_edit", :locals => {
            :product => offered_product, :order => order, :cycle => cycle,
            :ordered_product => order.blank? ? nil : order.products.select{ |op| offered_product.id == op.product_id }.first } %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>

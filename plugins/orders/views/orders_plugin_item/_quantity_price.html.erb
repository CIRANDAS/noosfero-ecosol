<div class="quantity-price-row <%=status%>">
  <% data = OrdersPlugin::Item::StatusDataMap[status] %>
  <% quantity = item.send "quantity_#{data}_localized" %>
  <% price = item.send "price_#{data}_as_currency_number" %>

  <div class="box-field quantity">
    <span class="value"><%= quantity %></span>
    <span class="unit"><%= excerpt_ending item.product.unit.singular, 4, '.' rescue '' %></span>

    <% if @admin %>
      <% if f and item.order.current_status == status and OrdersPlugin::Item::StatusAccessMap[status] == actor_name %>
        <%= f.text_field "quantity_#{data}", :value => quantity, :onkeyup => 'orders.item.quantity_keyup(this, event)' %>
      <% end %>
    <% else %>
      <%= f.text_field "quantity_#{data}", :value => quantity, :onkeyup => 'orders.item.quantity_keyup(this, event)' %>
    <% end %>
  </div>

  <div class="box-field price-total">
    <%= price_span price %>
  </div>

  <% if @admin %>
    <div class="box-field status">
      <%= t(OrdersPlugin::Order::StatusText[status]) %>
    </div>
  <% end %>
</div>

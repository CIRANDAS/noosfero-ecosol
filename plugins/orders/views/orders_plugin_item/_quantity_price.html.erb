<div class="quantity-price-row <%= status %> <%= data[:flags].keys.join ' ' %> <%= 'admin' if @admin %>">

  <div class="box-field quantity">
    <span class="value"><%= data[:quantity] %></span>

    <% unless @simple %>
      <% if @admin %>
        <% if (data[:flags][:next] or data[:flags][:current]) and OrdersPlugin::Item::StatusAccessMap[status] == actor_name %>
          <%= text_field_tag "item[quantity_#{data[:field]}]", data[:quantity], :onkeydown => 'orders.item.quantity_keydown(this, event)' %>
        <% end %>
      <% else %>
        <%= text_field_tag "item[quantity_#{data[:field]}]", data[:quantity], :onkeydown => 'orders.item.quantity_keydown(this, event)' %>
      <% end %>
    <% end %>

    <span class="unit"><%= excerpt_ending item.product.unit.singular, 4, '.' rescue '' %></span>
  </div>

  <div class="box-field price-total">
    <%= price_span data[:price] %>
  </div>

  <% if @admin %>
    <div class="box-field status">
      <%= t(OrdersPlugin::Order::StatusText[status]) %>
    </div>
  <% end %>

</div>

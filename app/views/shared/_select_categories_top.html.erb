<% categories_selected ||= nil %>
<% title ||= nil %>

<% extend CategoriesHelper %>

<%= content_tag "h#{title_size}", title, :class => "box-title" %>

<%= hidden_field_tag "#{object_name}[category_ids][]", nil %>

<div id="category-ajax-selector">
  <table id='selected-categories' class='actions'>
    <% categories_selected.each do |category| %>
      <%= render :partial => 'shared/category_row', :locals => {:category => category, :object_name => object_name} %>
    <% end %>
    <% if categories_selected.blank? %>
      <tr>
        <td colspan=2><i><%= _('There are no categories selected yet.') %></i></td>
      </tr>
    <% end %>
  </table>

  <table id='select-categories' class='actions'>
    <%= render :partial => 'shared/select_categories', :locals => {:object_name => object_name, :multiple => true, :categories_selected => categories_selected }, :layout => false %>
  </table>
</div>
